<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listado de materias</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-10">
        <div class="card shadow-sm">
          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0">Listado de materias</h4>
            <a href="/subject/register" class="btn btn-light btn-sm">+ Nueva materia</a>
          </div>

          <div class="card-body">

            <!-- Mensajes flash -->
            {{#if success_msg}}
              <div class="alert alert-success">{{success_msg}}</div>
            {{/if}}
            {{#if error_msg}}
              <div class="alert alert-danger">{{error_msg}}</div>
            {{/if}}

            <!-- Tabla de profesores -->
            {{#if subjects.length}}
              <div class="table-responsive">
                <table class="table table-bordered table-striped align-middle">
                  <thead class="table-primary">
                    <tr>
                      <th>ID</th>
                      <th>Nombre</th>
                      <th>Codigo</th>
                      <th>Capacidad máxima</th>
                      <th>Capacidad minima</th>
                      <td>Horario de inicio</td>
                      <td>Horario de fin</td>
                      <th>Profesor</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    {{#each subjects}}
                      <tr>
                        <td>{{subject_id}}</td>
                        <td>{{name}}</td>
                        <td>{{code}}</td>
                        <td>{{minimum_capacity}}</td>
                        <td>{{maximum_capacity}}</td>
                        <td>{{start_time}}</td>
                        <td>{{end_time}}</td>
                        <td>{{teacher_id}}</td>
                        <td>
                          <div class="d-flex gap-2">
                            <a href="/subject/edit/{{subject_id}}" class="btn btn-sm btn-warning">Editar</a>
                            <form action="/subject/delete/{{subject_id}}" method="POST" onsubmit="return confirm('¿Seguro que desea eliminar este registro?')">
                              <button type="submit" class="btn btn-sm btn-danger">Eliminar</button>
                            </form>
                          </div>
                        </td>
                      </tr>
                    {{/each}}
                  </tbody>
                </table>
              </div>
            {{else}}
              <div class="alert alert-info text-center">
                No hay materias registradas.
              </div>
            {{/if}}

          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>